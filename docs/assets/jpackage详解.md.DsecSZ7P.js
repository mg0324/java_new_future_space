import{_ as i,o as s,c as l,ae as n}from"./chunks/framework.DLxmGODj.js";const c=JSON.parse('{"title":"jpackage 详解","description":"","frontmatter":{},"headers":[],"relativePath":"jpackage详解.md","filePath":"jpackage详解.md"}'),h={name:"jpackage详解.md"};function e(t,a,p,k,r,d){return s(),l("div",null,[...a[0]||(a[0]=[n(`<h1 id="jpackage-详解" tabindex="-1">jpackage 详解 <a class="header-anchor" href="#jpackage-详解" aria-label="Permalink to &quot;jpackage 详解&quot;">​</a></h1><p>jpackage 是 Java 16 中正式发布的工具，用于将 Java 应用程序打包成原生安装包。它最初作为孵化器功能引入，在 Java 16 中成为标准特性。</p><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>jpackage 是一个命令行工具，它可以将 Java 应用程序及其依赖项（包括 JRE）打包成原生的安装包或应用程序包。这使得 Java 应用程序可以像原生应用程序一样安装和运行，无需用户单独安装 JRE。</p><h2 id="主要功能" tabindex="-1">主要功能 <a class="header-anchor" href="#主要功能" aria-label="Permalink to &quot;主要功能&quot;">​</a></h2><h3 id="_1-创建原生安装包" tabindex="-1">1. 创建原生安装包 <a class="header-anchor" href="#_1-创建原生安装包" aria-label="Permalink to &quot;1. 创建原生安装包&quot;">​</a></h3><ul><li>为不同操作系统创建适当的安装包格式</li><li>Windows: MSI 或 EXE</li><li>macOS: PKG 或 DMG</li><li>Linux: RPM 或 DEB</li></ul><h3 id="_2-打包-jre" tabindex="-1">2. 打包 JRE <a class="header-anchor" href="#_2-打包-jre" aria-label="Permalink to &quot;2. 打包 JRE&quot;">​</a></h3><ul><li>自动包含最小化的 JRE，无需用户预先安装</li><li>减少应用程序的依赖复杂性</li></ul><h3 id="_3-创建可执行文件" tabindex="-1">3. 创建可执行文件 <a class="header-anchor" href="#_3-创建可执行文件" aria-label="Permalink to &quot;3. 创建可执行文件&quot;">​</a></h3><ul><li>生成原生可执行文件</li><li>提供更自然的用户体验</li></ul><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to &quot;使用示例&quot;">​</a></h2><h3 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建简单的应用程序包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jpackage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input_directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MyApp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --app-version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.example.mymodule/com.example.MainClass</span></span></code></pre></div><h3 id="详细参数示例" tabindex="-1">详细参数示例 <a class="header-anchor" href="#详细参数示例" aria-label="Permalink to &quot;详细参数示例&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完整的打包命令示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jpackage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   # 包含 JAR 文件的输入目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MyApplication</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 应用程序名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --app-version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 应用程序版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --icon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> icon.png</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 应用程序图标</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --main-class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.example.Main</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 主类</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --main-jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 主 JAR 文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --java-options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;-Xmx2g&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # JVM 选项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My Application&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 应用程序描述</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --vendor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My Company&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 供应商名称</span></span></code></pre></div><h3 id="平台特定选项" tabindex="-1">平台特定选项 <a class="header-anchor" href="#平台特定选项" aria-label="Permalink to &quot;平台特定选项&quot;">​</a></h3><h4 id="windows-选项" tabindex="-1">Windows 选项 <a class="header-anchor" href="#windows-选项" aria-label="Permalink to &quot;Windows 选项&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows 特定选项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jpackage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MyApp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --win-console</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 显示控制台窗口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --win-dir-chooser</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 显示目录选择对话框</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --win-menu</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  # 创建开始菜单项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --win-menu-group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My Apps&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 菜单组名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --win-per-user-install</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 每用户安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --win-shortcut</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # 创建桌面快捷方式</span></span></code></pre></div><h4 id="macos-选项" tabindex="-1">macOS 选项 <a class="header-anchor" href="#macos-选项" aria-label="Permalink to &quot;macOS 选项&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS 特定选项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jpackage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MyApp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --mac-package-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My App&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 包名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --mac-package-identifier</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.mycompany.myapp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 包标识符</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --mac-signing-key-user-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Developer ID Application: Name&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 签名密钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --mac-app-store-compliant</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 符合 App Store 规范</span></span></code></pre></div><h4 id="linux-选项" tabindex="-1">Linux 选项 <a class="header-anchor" href="#linux-选项" aria-label="Permalink to &quot;Linux 选项&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux 特定选项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jpackage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MyApp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --linux-app-category</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Game</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 应用程序类别</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --linux-deb-maintainer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;maintainer@example.com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # DEB 维护者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --linux-menu-group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Games&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 菜单组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --linux-shortcut</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 创建快捷方式</span></span></code></pre></div><h2 id="支持的输出格式" tabindex="-1">支持的输出格式 <a class="header-anchor" href="#支持的输出格式" aria-label="Permalink to &quot;支持的输出格式&quot;">​</a></h2><h3 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h3><ul><li><code>.exe</code> - 可执行安装程序</li><li><code>.msi</code> - Windows Installer 包</li></ul><h3 id="macos" tabindex="-1">macOS <a class="header-anchor" href="#macos" aria-label="Permalink to &quot;macOS&quot;">​</a></h3><ul><li><code>.pkg</code> - Apple Installer 包</li><li><code>.dmg</code> - 磁盘镜像</li></ul><h3 id="linux" tabindex="-1">Linux <a class="header-anchor" href="#linux" aria-label="Permalink to &quot;Linux&quot;">​</a></h3><ul><li><code>.deb</code> - Debian 包</li><li><code>.rpm</code> - Red Hat 包</li></ul><h2 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-label="Permalink to &quot;优势&quot;">​</a></h2><h3 id="_1-用户体验" tabindex="-1">1. 用户体验 <a class="header-anchor" href="#_1-用户体验" aria-label="Permalink to &quot;1. 用户体验&quot;">​</a></h3><ul><li>无需预先安装 JRE</li><li>原生安装体验</li><li>简化应用程序分发</li></ul><h3 id="_2-开发者友好" tabindex="-1">2. 开发者友好 <a class="header-anchor" href="#_2-开发者友好" aria-label="Permalink to &quot;2. 开发者友好&quot;">​</a></h3><ul><li>简化的部署流程</li><li>减少兼容性问题</li><li>自动处理依赖关系</li></ul><h3 id="_3-安全性" tabindex="-1">3. 安全性 <a class="header-anchor" href="#_3-安全性" aria-label="Permalink to &quot;3. 安全性&quot;">​</a></h3><ul><li>包含固定版本的 JRE</li><li>避免系统 JRE 变化的影响</li></ul><h2 id="限制和注意事项" tabindex="-1">限制和注意事项 <a class="header-anchor" href="#限制和注意事项" aria-label="Permalink to &quot;限制和注意事项&quot;">​</a></h2><h3 id="_1-平台依赖" tabindex="-1">1. 平台依赖 <a class="header-anchor" href="#_1-平台依赖" aria-label="Permalink to &quot;1. 平台依赖&quot;">​</a></h3><ul><li>需要在目标平台上构建</li><li>无法跨平台构建安装包</li></ul><h3 id="_2-大小考虑" tabindex="-1">2. 大小考虑 <a class="header-anchor" href="#_2-大小考虑" aria-label="Permalink to &quot;2. 大小考虑&quot;">​</a></h3><ul><li>包含 JRE 可能增加包大小</li><li>需要权衡功能和大小</li></ul><h3 id="_3-签名要求" tabindex="-1">3. 签名要求 <a class="header-anchor" href="#_3-签名要求" aria-label="Permalink to &quot;3. 签名要求&quot;">​</a></h3><ul><li>macOS 和 Windows 可能需要代码签名</li><li>对于分发到应用商店尤其重要</li></ul><h2 id="与其他工具的关系" tabindex="-1">与其他工具的关系 <a class="header-anchor" href="#与其他工具的关系" aria-label="Permalink to &quot;与其他工具的关系&quot;">​</a></h2><h3 id="与-javafx-packager-的关系" tabindex="-1">与 JavaFX Packager 的关系 <a class="header-anchor" href="#与-javafx-packager-的关系" aria-label="Permalink to &quot;与 JavaFX Packager 的关系&quot;">​</a></h3><ul><li>jpackage 替代了 JavaFX Packager</li><li>提供更广泛的功能和平台支持</li></ul><h3 id="与-jlink-的关系" tabindex="-1">与 JLink 的关系 <a class="header-anchor" href="#与-jlink-的关系" aria-label="Permalink to &quot;与 JLink 的关系&quot;">​</a></h3><ul><li>jpackage 可以与 jlink 结合使用</li><li>jlink 用于创建自定义运行时镜像</li><li>jpackage 用于创建原生安装包</li></ul><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><h3 id="_1-应用程序准备" tabindex="-1">1. 应用程序准备 <a class="header-anchor" href="#_1-应用程序准备" aria-label="Permalink to &quot;1. 应用程序准备&quot;">​</a></h3><ul><li>确保应用程序具有清晰的主类</li><li>测试在不同环境下的运行</li></ul><h3 id="_2-图标和资源" tabindex="-1">2. 图标和资源 <a class="header-anchor" href="#_2-图标和资源" aria-label="Permalink to &quot;2. 图标和资源&quot;">​</a></h3><ul><li>提供适当大小的应用程序图标</li><li>确保资源文件路径正确</li></ul><h3 id="_3-版本管理" tabindex="-1">3. 版本管理 <a class="header-anchor" href="#_3-版本管理" aria-label="Permalink to &quot;3. 版本管理&quot;">​</a></h3><ul><li>使用有意义的版本号</li><li>考虑自动更新机制</li></ul><h2 id="未来发展方向" tabindex="-1">未来发展方向 <a class="header-anchor" href="#未来发展方向" aria-label="Permalink to &quot;未来发展方向&quot;">​</a></h2><p>jpackage 的引入标志着 Java 应用程序分发的重大进步，它解决了长期以来 Java 应用程序部署复杂的问题。随着 Java 平台的发展，jpackage 也在不断完善，未来可能会支持更多平台特性和更灵活的配置选项。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>jpackage 是 Java 16 中一个重要的新功能，它简化了 Java 应用程序的部署和分发过程。通过将应用程序及其运行时环境打包成原生格式，jpackage 提供了更好的用户体验和更简单的分发机制。对于希望提供专业级 Java 应用程序的开发者来说，jpackage 是一个不可或缺的工具。</p>`,60)])])}const F=i(h,[["render",e]]);export{c as __pageData,F as default};
